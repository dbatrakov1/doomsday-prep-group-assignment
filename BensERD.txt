---
config:
  layout: elk
---
erDiagram
  City ||--o{ Shelter : has
  City ||--o{ ResourceSite : contains

  PowerSource ||--o{ Shelter : powers
  WaterSource ||--o{ Shelter : supplies

  Shelter ||--o{ Survivor : houses
  Shelter ||--o{ Inventory : owns
  Shelter ||--o{ Encounter : involved_in

  Survivor ||--o{ DiseaseCase : has_case
  Survivor ||--o{ SurvivorSkill : has_skill
  Skill ||--o{ SurvivorSkill : used_by

  Inventory ||--o{ Item : holds

  Faction ||--o{ Encounter : interacts_with

  City {
    int city_id PK
    string name
    string region
  }

  PowerSource {
    int power_source_id PK
    string name
  }

  WaterSource {
    int water_source_id PK
    string name
  }

  Shelter {
    int shelter_id PK
    int city_id FK
    int power_source_id FK
    int water_source_id FK
    string name
    int capacity
  }

  Survivor {
    int survivor_id PK
    int shelter_id FK
    string first_name
    string last_name
    date birth_date
  }

  Skill {
    int skill_id PK
    string name
    string description
  }

  SurvivorSkill {
    int survivor_id FK
    int skill_id FK
    int proficiency_level
  }

  DiseaseCase {
    int disease_case_id PK
    int survivor_id FK
    date diagnosis_date
    string status
  }

  Inventory {
    int inventory_id PK
    int shelter_id FK
    string name
  }

  Item {
    int item_id PK
    int inventory_id FK
    string item_name
    string category
    int quantity
    bool is_currency
    decimal unit_value
  }

  ResourceSite {
    int resource_site_id PK
    int city_id FK
    string resource_type
    string site_name
    string description
    bool is_operational
  }

  Faction {
    int faction_id PK
    string name
    string faction_type
    string attitude
  }

  Encounter {
    int encounter_id PK
    int shelter_id FK
    int faction_id FK
    date encounter_date
    string encounter_type
  }
